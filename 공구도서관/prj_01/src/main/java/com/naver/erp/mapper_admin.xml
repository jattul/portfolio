<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.naver.erp.AdminDAO">


	<select id="getReportBoard"  resultType="java.util.HashMap">

		select 
			reportno||''		as "reportNo"
			,reason				as "reason"
			,reportcontent		as "reportContent"
			,reporterEmail		as "reporterEmail"
			,writerEmail		as "writerEmail"
			,partno||''			as "partNo"
			,postno||''			as "postNo"
		from 
			report

	

	</select>
	

	
	
	
	<select id="getReportListTotCnt"  parameterType="com.naver.erp.ReportDTO" resultType="int">

		select 
			count(*)
		from 
			report

	</select>	
	
	
	
	
	<select id="getTotMember"   resultType="int">

		select 
			count(*)
		from 
			memberboard

	</select>
	
	
	<select id="getTotJijum"   resultType="int">

		select 
			count(*)
		from 
			jijum

	</select>
	
	
	<select id="getTotTool"   resultType="int">

		select 
			count(*)
		from 
			tool

	</select>
	

		
	<select id="getTotOnRental"   resultType="int">

		select 
			count(*)
		from 
			onrental

	</select>
	

	<select id="getTotOnBooking"   resultType="int">

		select 
			count(*)
		from 
			onbooking

	</select>
	
	
	<select id="getOnBooking"   resultType="hashmap">

		select 
			*
		from 
			onbooking

	</select>
	
	<select id="getOnRental"   resultType="hashmap">

		select 
			*
		from 
			onrental

	</select>
	
	

	<insert id="insertBook" parameterType="hashmap" >
		insert  into onRental
		values(
		(select nvl(max(no),0)+1 from onRental)
		,#{MEMBERNO}
		,#{MEMBEREMAIL}
		,sysdate
		,sysdate+7
		,#{TOOLNO}
		,#{JIJUMNO}
		,#{TOOLNAME}
		)
		
</insert>
	
	<delete id="upBook" parameterType="int">
		delete from onbooking
		where no=#{no}
	
	</delete>
	
	
	<select id="getOnBook" parameterType="int"  resultType="hashmap">

		select 
			*
		from 
			onbooking
			where no =#{no}

	</select>
	
	<select id="getOnRentals" parameterType="int"  resultType="hashmap">

		select 
			*
		from 
			onrental
			where no =#{no}

	</select>
	
	
	
	<insert id="insertReturn" parameterType="hashmap" >
		insert  into return
		values(
		(select nvl(max(no),0)+1 from return)
		,#{MEMBERNO}
		,#{MEMBEREMAIL}
		,#{RENTALDATE}
		,sysdate
		,#{TOOLNO}
		,#{JIJUMNO}
		,#{TOOLNAME}
		)
		
</insert>
	
	<delete id="upReturn" parameterType="int">
		delete from onrental
		where no=#{no}
	
	</delete>
	
	
	<update id="upStat" parameterType="int" >
	update tool set nowstatus=0  WHERE no = (select TOOLNO from onrental where no = #{no} )

	

</update>
	
	
	
</mapper>





